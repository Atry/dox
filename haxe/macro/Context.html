<!DOCTYPE html><html lang="en"><head><link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"></link><script src="http://code.jquery.com/jquery-1.9.1.min.js"></script><script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script><link href="/dox/styles.css" rel="stylesheet"></link><script type="text/javascript">var dox = {rootPath: "/dox",platforms: ["cpp","cs","flash","flash8","java","js","neko","php"]};</script><script type="text/javascript" src="/dox/nav.js"></script><script type="text/javascript" src="/dox/index.js"></script><link rel="icon" href="favicon.ico" type="image/x-icon"></link><title>Context</title></head><body><div class="container-fluid"><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left"><input id="search" type="text" class="search-query" placeholder="Search" autocomplete="off"></input></form><!--
				<ul class="nav">
					<li id="select-version" class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Version<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li data="3_0"><a href="#">3.0</a></li>
							<li data="3_1"><a href="#">3.1</a></li>
							<li data="3_2"><a href="#">3.2</a></li>
						</ul>
					</li>
				</ul>
				--><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="cpp"><a href="#">cpp</a></li><li data="cs"><a href="#">cs</a></li><li data="flash"><a href="#">flash</a></li><li data="flash8"><a href="#">flash8</a></li><li data="java"><a href="#">java</a></li><li data="js"><a href="#">js</a></li><li data="neko"><a href="#">neko</a></li><li data="php"><a href="#">php</a></li></ul></li></ul><ul class="nav pull-right"><li><a href="#">haxe.macro.Context</a></li></ul></div></div><div class="row-fluid"><div id="nav"></div><div id="content"><h1><code><span class="directive">class </span>haxe.macro.Context</code></h1><div><code class="dark"><span class="macro">Available on neko</span></code></div><div class="doc"><p>This is an API that can be used by macros implementations.</p></div><h2>Class Fields</h2><div class="platform platform-neko"><a name="addResource"></a><h3><code><span class="keyword">function</span> <a href="#addResource">addResource</a>(name:<a class="type" href="/dox/String.html">String</a>, data:<a class="type" href="/dox/haxe/io/Bytes.html">Bytes</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Add or modify a resource that will be accessible with haxe.Resource api.</p></div><div class="platform platform-neko"><a name="currentPos"></a><h3><code><span class="keyword">function</span> <a href="#currentPos">currentPos</a>():<a class="type" href="/dox/haxe/macro/Position.html">Position</a></code></h3><p>Returns the position at which the macro is called</p></div><div class="platform platform-neko"><a name="defineType"></a><h3><code><span class="keyword">function</span> <a href="#defineType">defineType</a>(t:<a class="type" href="/dox/haxe/macro/TypeDefinition.html">TypeDefinition</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Define a new type based on the given definition.</p></div><div class="platform platform-neko"><a name="defined"></a><h3><code><span class="keyword">function</span> <a href="#defined">defined</a>(s:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/Bool.html">Bool</a></code></h3><p>Tells is the given compiler directive has been defined with -D</p></div><div class="platform platform-neko"><a name="definedValue"></a><h3><code><span class="keyword">function</span> <a href="#definedValue">definedValue</a>(key:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/String.html">String</a></code></h3><p>Returns the value defined through -D key=value</p></div><div class="platform platform-neko"><a name="error"></a><h3><code><span class="keyword">function</span> <a href="#error">error</a>(msg:<a class="type" href="/dox/String.html">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):Dynamic</code></h3><p>Display a compilation error at the given position in code and abort the current macro call</p></div><div class="platform platform-neko"><a name="follow"></a><h3><code><span class="keyword">function</span> <a href="#follow">follow</a>(t:<a class="type" href="/dox/haxe/macro/Type.html">Type</a>, once:<a class="type" href="/dox/Bool.html">Bool</a>):<a class="type" href="/dox/haxe/macro/Type.html">Type</a></code></h3><p>Follow all typedefs to reach the actual real type</p></div><div class="platform platform-neko"><a name="getBuildFields"></a><h3><code><span class="keyword">function</span> <a href="#getBuildFields">getBuildFields</a>():<a class="type" href="/dox/Array.html">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Field.html">Field</a>&gt;</code></h3><p>Returns the list of fields for the current type inside the build macro.</p></div><div class="platform platform-neko"><a name="getClassPath"></a><h3><code><span class="keyword">function</span> <a href="#getClassPath">getClassPath</a>():<a class="type" href="/dox/Array.html">Array</a>&lt;<a class="type" href="/dox/String.html">String</a>&gt;</code></h3><p>Return the current classpath</p></div><div class="platform platform-neko"><a name="getLocalClass"></a><h3><code><span class="keyword">function</span> <a href="#getLocalClass">getLocalClass</a>():<a class="type" href="/dox/Null.html">Null</a>&lt;<a class="type" href="/dox/haxe/macro/Ref.html">Ref</a>&lt;<a class="type" href="/dox/haxe/macro/ClassType.html">ClassType</a>&gt;&gt;</code></h3><p>Returns the current class in which the macro is called</p></div><div class="platform platform-neko"><a name="getLocalMethod"></a><h3><code><span class="keyword">function</span> <a href="#getLocalMethod">getLocalMethod</a>():<a class="type" href="/dox/Null.html">Null</a>&lt;<a class="type" href="/dox/String.html">String</a>&gt;</code></h3><p>Returns the name of the method from which the macro was called</p></div><div class="platform platform-neko"><a name="getLocalType"></a><h3><code><span class="keyword">function</span> <a href="#getLocalType">getLocalType</a>():<a class="type" href="/dox/Null.html">Null</a>&lt;<a class="type" href="/dox/haxe/macro/Type.html">Type</a>&gt;</code></h3><p>Returns the current type in/on which the macro is called</p></div><div class="platform platform-neko"><a name="getLocalUsing"></a><h3><code><span class="keyword">function</span> <a href="#getLocalUsing">getLocalUsing</a>():<a class="type" href="/dox/Array.html">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Ref.html">Ref</a>&lt;<a class="type" href="/dox/haxe/macro/ClassType.html">ClassType</a>&gt;&gt;</code></h3><p>Returns classes which are available for "using" where the macro was called</p></div><div class="platform platform-neko"><a name="getLocalVars"></a><h3><code><span class="keyword">function</span> <a href="#getLocalVars">getLocalVars</a>():<a class="type" href="/dox/haxe/ds/StringMap.html">StringMap</a>&lt;<a class="type" href="/dox/haxe/macro/Type.html">Type</a>&gt;</code></h3><p>Returns local variables accessible where the macro was called</p></div><div class="platform platform-neko"><a name="getModule"></a><h3><code><span class="keyword">function</span> <a href="#getModule">getModule</a>(name:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/Array.html">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Type.html">Type</a>&gt;</code></h3><p>Return the list of types defined in the given compilation unit module</p></div><div class="platform platform-neko"><a name="getPosInfos"></a><h3><code><span class="keyword">function</span> <a href="#getPosInfos">getPosInfos</a>(p:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):{min:<a class="type" href="/dox/Int.html">Int</a>, max:<a class="type" href="/dox/Int.html">Int</a>, file:<a class="type" href="/dox/String.html">String</a>}</code></h3><p>Get the informations stored into a given position.</p></div><div class="platform platform-neko"><a name="getType"></a><h3><code><span class="keyword">function</span> <a href="#getType">getType</a>(name:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/haxe/macro/Type.html">Type</a></code></h3><p>Resolve a type from its name.</p></div><div class="platform platform-neko"><a name="getTypedExpr"></a><h3><code><span class="keyword">function</span> <a href="#getTypedExpr">getTypedExpr</a>(t:<a class="type" href="/dox/haxe/macro/TypedExpr.html">TypedExpr</a>):<a class="type" href="/dox/haxe/macro/Expr.html">Expr</a></code></h3><p>Return the raw expression corresponding to the given typed expression.</p></div><div class="platform platform-neko"><a name="makeExpr"></a><h3><code><span class="keyword">function</span> <a href="#makeExpr">makeExpr</a>(v:Dynamic, pos:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):<a class="type" href="/dox/haxe/macro/Expr.html">Expr</a></code></h3><p>Build an expression corresponding to the given runtime value. Only basic types + enums are supported.</p></div><div class="platform platform-neko"><a name="makePosition"></a><h3><code><span class="keyword">function</span> <a href="#makePosition">makePosition</a>(inf:{min:<a class="type" href="/dox/Int.html">Int</a>, max:<a class="type" href="/dox/Int.html">Int</a>, file:<a class="type" href="/dox/String.html">String</a>}):<a class="type" href="/dox/haxe/macro/Position.html">Position</a></code></h3><p>Build a position with the given informations.</p></div><div class="platform platform-neko"><a name="onGenerate"></a><h3><code><span class="keyword">function</span> <a href="#onGenerate">onGenerate</a>(callb:<a class="type" href="/dox/Array.html">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Type.html">Type</a>&gt; -&gt;<a class="type" href="/dox/Void.html">Void</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Set a callback function that will return all the types compiled before they get generated.</p></div><div class="platform platform-neko"><a name="onMacroContextReused"></a><h3><code><span class="keyword">function</span> <a href="#onMacroContextReused">onMacroContextReused</a>(callb:<a class="type" href="/dox/Bool.html">Bool</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Register a callback function that will be called everytime the macro context cached is reused with a new
compilation. This enable to reset some static vars since the code might have been changed. If the callback
returns false, the macro context is discarded and another one is created.</p></div><div class="platform platform-neko"><a name="onTypeNotFound"></a><h3><code><span class="keyword">function</span> <a href="#onTypeNotFound">onTypeNotFound</a>(callb:<a class="type" href="/dox/String.html">String</a> -&gt;<a class="type" href="/dox/haxe/macro/TypeDefinition.html">TypeDefinition</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Set a callback function that will be called when a type cannot be found.</p></div><div class="platform platform-neko"><a name="parse"></a><h3><code><span class="keyword">function</span> <a href="#parse">parse</a>(expr:<a class="type" href="/dox/String.html">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):<a class="type" href="/dox/haxe/macro/Expr.html">Expr</a></code></h3><p>Parse a constructed string into the corresponding expression.</p></div><div class="platform platform-neko"><a name="parseInlineString"></a><h3><code><span class="keyword">function</span> <a href="#parseInlineString">parseInlineString</a>(expr:<a class="type" href="/dox/String.html">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):<a class="type" href="/dox/haxe/macro/Expr.html">Expr</a></code></h3><p>Parse a string contained into source code into the corresponding expression. Errors positions are reported within this string</p></div><div class="platform platform-neko"><a name="registerModuleDependency"></a><h3><code><span class="keyword">function</span> <a href="#registerModuleDependency">registerModuleDependency</a>(modulePath:<a class="type" href="/dox/String.html">String</a>, externFile:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Manually add a dependency between a module and a third party file :
make sure the module gets recompiled (if it was cached) in case the extern file has been modified as well.</p></div><div class="platform platform-neko"><a name="registerModuleReuseCall"></a><h3><code><span class="keyword">function</span> <a href="#registerModuleReuseCall">registerModuleReuseCall</a>(modulePath:<a class="type" href="/dox/String.html">String</a>, macroCall:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Add a macro call to perform in case the module is reused by the compilation cache.</p></div><div class="platform platform-neko"><a name="resolvePath"></a><h3><code><span class="keyword">function</span> <a href="#resolvePath">resolvePath</a>(file:<a class="type" href="/dox/String.html">String</a>):<a class="type" href="/dox/String.html">String</a></code></h3><p>Resolve a filename based on current classpath.</p></div><div class="platform platform-neko"><a name="signature"></a><h3><code><span class="keyword">function</span> <a href="#signature">signature</a>(v:Dynamic):<a class="type" href="/dox/String.html">String</a></code></h3><p>Quickly build an hashed MD5 signature for any given value</p></div><div class="platform platform-neko"><a name="toComplexType"></a><h3><code><span class="keyword">function</span> <a href="#toComplexType">toComplexType</a>(t:<a class="type" href="/dox/haxe/macro/Type.html">Type</a>):<a class="type" href="/dox/Null.html">Null</a>&lt;<a class="type" href="/dox/haxe/macro/ComplexType.html">ComplexType</a>&gt;</code></h3><p>Returns the ComplexType corresponding to the given Type.</p></div><div class="platform platform-neko"><a name="typeof"></a><h3><code><span class="keyword">function</span> <a href="#typeof">typeof</a>(e:<a class="type" href="/dox/haxe/macro/Expr.html">Expr</a>):<a class="type" href="/dox/haxe/macro/Type.html">Type</a></code></h3><p>Evaluate the type a given expression would have in the context of the current macro call.</p></div><div class="platform platform-neko"><a name="unify"></a><h3><code><span class="keyword">function</span> <a href="#unify">unify</a>(t1:<a class="type" href="/dox/haxe/macro/Type.html">Type</a>, t2:<a class="type" href="/dox/haxe/macro/Type.html">Type</a>):<a class="type" href="/dox/Bool.html">Bool</a></code></h3><p>Returns true if t1 and t2 unify, false otherwise</p></div><div class="platform platform-neko"><a name="warning"></a><h3><code><span class="keyword">function</span> <a href="#warning">warning</a>(msg:<a class="type" href="/dox/String.html">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position.html">Position</a>):<a class="type" href="/dox/Void.html">Void</a></code></h3><p>Display a compilation warning at the given position in code</p></div></div></div></div></body></html>