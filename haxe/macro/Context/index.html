<!DOCTYPE html><html lang="en"><head><link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"></link><script src="http://code.jquery.com/jquery-1.9.1.min.js"></script><script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script><link href="/dox/styles.css" rel="stylesheet"></link><script type="text/javascript">var dox = {rootPath: "/dox",platforms: ["cpp","cs","flash","flash8","java","js","neko","php"]};</script><script type="text/javascript" src="/dox/nav.js"></script><script type="text/javascript" src="/dox/index.js"></script><link rel="icon" href="/dox/favicon.ico" type="image/x-icon"></link><title>Context</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left"><input id="search" type="text" class="search-query" placeholder="Search" autocomplete="off"></input></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="cpp"><a href="#">cpp</a></li><li data="cs"><a href="#">cs</a></li><li data="flash"><a href="#">flash</a></li><li data="flash8"><a href="#">flash8</a></li><li data="java"><a href="#">java</a></li><li data="js"><a href="#">js</a></li><li data="neko"><a href="#">neko</a></li><li data="php"><a href="#">php</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">haxe.macro.Context</span></code></h1></div><div class="body"><p class="availability"> neko</p><div class="doc"><p>Context provides an API for macro programming.</p>
<p>It contains common functions that interact with the macro interpreter to
query or set information. Other API functions are available in the tools
classes:</p><ul><li><code><a href="/dox/haxe/macro/ComplexTypeTools">haxe.macro.ComplexTypeTools</a></code></li><li><code><a href="/dox/haxe/macro/ExprTools">haxe.macro.ExprTools</a></code></li><li><code><a href="/dox/haxe/macro/TypeTools">haxe.macro.TypeTools</a></code></li></ul></div><h2>Class Fields</h2><div class="platform platform-neko"><a name="addResource"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#addResource"><span class="identifier">addResource</span></a>(name:<a class="type" href="/dox/String">String</a>, data:<a class="type" href="/dox/haxe/io/Bytes">Bytes</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Makes resource <code>data</code> available as <code>name</code>.</p>
<p>The resource is then available using the <code>haxe.macro.Resource</code> API.</p>
<p>If a previous resource was bound to <code>name</code>, it is overwritten.</p></div></div><div class="platform platform-neko"><a name="currentPos"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#currentPos"><span class="identifier">currentPos</span></a>():<a class="type" href="/dox/haxe/macro/Position">Position</a></code></h3><div class="doc"><p>Returns the position at which the macro was called.</p></div></div><div class="platform platform-neko"><a name="defineType"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#defineType"><span class="identifier">defineType</span></a>(t:<a class="type" href="/dox/haxe/macro/TypeDefinition">TypeDefinition</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Defines a new type from <code>TypeDefinition</code> <code>t</code>.</p></div></div><div class="platform platform-neko"><a name="defined"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#defined"><span class="identifier">defined</span></a>(s:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/Bool">Bool</a></code></h3><div class="doc"><p>Tells if compiler directive <code>s</code> has been set.</p>
<p>Compiler directives are set using the <code>-D</code> command line parameter, or
by calling <code><a href="/dox/haxe/macro/Compiler#define">haxe.macro.Compiler.define</a></code>.</p></div></div><div class="platform platform-neko"><a name="definedValue"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#definedValue"><span class="identifier">definedValue</span></a>(key:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/String">String</a></code></h3><div class="doc"><p>Returns the value defined for compiler directive <code>key</code>.</p>
<p>If no value is defined for <code>key</code>, null is returned.</p>
<p>Compiler directive values are set using the <code>-D key=value</code> command line
parameter, or by calling <code><a href="/dox/haxe/macro/Compiler#define">haxe.macro.Compiler.define</a></code>.</p>
<p>The default value is <code>"1"</code>.</p></div></div><div class="platform platform-neko"><a name="error"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#error"><span class="identifier">error</span></a>(msg:<a class="type" href="/dox/String">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position">Position</a>):<a class="type" href="/dox/Dynamic">Dynamic</a></code></h3><div class="doc"><p>Displays a compilation error <code>msg</code> at the given <code>Position</code> <code>pos</code>
and aborts the current macro call.</p></div></div><div class="platform platform-neko"><a name="follow"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#follow"><span class="identifier">follow</span></a>(t:<a class="type" href="/dox/haxe/macro/Type">Type</a>, once:<a class="type" href="/dox/Bool">Bool</a>):<a class="type" href="/dox/haxe/macro/Type">Type</a></code></h3><div class="doc"><p>Follows a type.</p>
<p>See <code><a href="/dox/haxe/macro/TypeTools#follow">haxe.macro.TypeTools.follow</a></code> for details.</p></div></div><div class="platform platform-neko"><a name="getBuildFields"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getBuildFields"><span class="identifier">getBuildFields</span></a>():<a class="type" href="/dox/Array">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Field">Field</a>&gt;</code></h3><div class="doc"><p>Returns an <code><a href="/dox/Array">Array</a></code> of fields of the class which is to be built.</p>
<p>This is only defined for <code>@:build/@:autoBuild</code> macros.</p></div></div><div class="platform platform-neko"><a name="getClassPath"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getClassPath"><span class="identifier">getClassPath</span></a>():<a class="type" href="/dox/Array">Array</a>&lt;<a class="type" href="/dox/String">String</a>&gt;</code></h3><div class="doc"><p>Returns an <code><a href="/dox/Array">Array</a></code> of current class paths in the order of their
declaration.</p>
<p>Modifying the returned array has no effect on the compiler. Class paths
can be added using <code><a href="/dox/haxe/macro/Compiler#addClassPath">haxe.macro.Compiler.addClassPath</a></code>.</p></div></div><div class="platform platform-neko"><a name="getLocalClass"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getLocalClass"><span class="identifier">getLocalClass</span></a>():<a class="type" href="/dox/Null">Null</a>&lt;<a class="type" href="/dox/haxe/macro/Ref">Ref</a>&lt;<a class="type" href="/dox/haxe/macro/ClassType">ClassType</a>&gt;&gt;</code></h3><div class="doc"><p>Returns the current class in which the macro was called.</p>
<p>If no such class exists, null is returned.</p></div></div><div class="platform platform-neko"><a name="getLocalMethod"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getLocalMethod"><span class="identifier">getLocalMethod</span></a>():<a class="type" href="/dox/Null">Null</a>&lt;<a class="type" href="/dox/String">String</a>&gt;</code></h3><div class="doc"><p>Returns the name of the method from which the macro was called.</p>
<p>If no such method exists, null is returned.</p></div></div><div class="platform platform-neko"><a name="getLocalType"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getLocalType"><span class="identifier">getLocalType</span></a>():<a class="type" href="/dox/Null">Null</a>&lt;<a class="type" href="/dox/haxe/macro/Type">Type</a>&gt;</code></h3><div class="doc"><p>Returns the current type in/on which the macro was called.</p>
<p>If no such type exists, null is returned.</p></div></div><div class="platform platform-neko"><a name="getLocalUsing"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getLocalUsing"><span class="identifier">getLocalUsing</span></a>():<a class="type" href="/dox/Array">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Ref">Ref</a>&lt;<a class="type" href="/dox/haxe/macro/ClassType">ClassType</a>&gt;&gt;</code></h3><div class="doc"><p>Returns an <code><a href="/dox/Array">Array</a></code> of classes which are available for <code>using</code> usage in
the context the macro was called.</p>
<p>Modifying the returned array has no effect on the compiler.</p></div></div><div class="platform platform-neko"><a name="getLocalVars"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getLocalVars"><span class="identifier">getLocalVars</span></a>():<a class="type" href="/dox/haxe/ds/StringMap">StringMap</a>&lt;<a class="type" href="/dox/haxe/macro/Type">Type</a>&gt;</code></h3><div class="doc"><p>Returns a map of local variables accessible in the context the macro was
called.</p>
<p>The keys of the returned map are the variable names, the values are
their types.</p>
<p>Modifying the returned map has no effect on the compiler.</p></div></div><div class="platform platform-neko"><a name="getModule"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getModule"><span class="identifier">getModule</span></a>(name:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/Array">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Type">Type</a>&gt;</code></h3><div class="doc"><p>Resolves a module identified by <code>name</code> and returns an <code><a href="/dox/Array">Array</a></code> of all
its contained types.</p>
<p>The resolution follows the usual class path rules where the last
declared class path has priority.</p>
<p>If no module can be found, null is returned.</p></div></div><div class="platform platform-neko"><a name="getPosInfos"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getPosInfos"><span class="identifier">getPosInfos</span></a>(p:<a class="type" href="/dox/haxe/macro/Position">Position</a>):{min:<a class="type" href="/dox/Int">Int</a>, max:<a class="type" href="/dox/Int">Int</a>, file:<a class="type" href="/dox/String">String</a>}</code></h3><div class="doc"><p>Returns the information stored in <code>Position</code> <code>p</code>.</p></div></div><div class="platform platform-neko"><a name="getType"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getType"><span class="identifier">getType</span></a>(name:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/haxe/macro/Type">Type</a></code></h3><div class="doc"><p>Resolves a type identified by <code>name</code>.</p>
<p>The resolution follows the usual class path rules where the last
declared class path has priority.</p>
<p>If no type can be found, null is returned.</p></div></div><div class="platform platform-neko"><a name="getTypedExpr"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#getTypedExpr"><span class="identifier">getTypedExpr</span></a>(t:<a class="type" href="/dox/haxe/macro/TypedExpr">TypedExpr</a>):<a class="type" href="/dox/haxe/macro/Expr">Expr</a></code></h3><div class="doc"><p>Returns a syntax-level expression corresponding to typed expression <code>t</code>.</p>
<p>This process may lose some information.</p></div></div><div class="platform platform-neko"><a name="makeExpr"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#makeExpr"><span class="identifier">makeExpr</span></a>(v:<a class="type" href="/dox/Dynamic">Dynamic</a>, pos:<a class="type" href="/dox/haxe/macro/Position">Position</a>):<a class="type" href="/dox/haxe/macro/Expr">Expr</a></code></h3><div class="doc"><p>Builds an expression from <code>v</code>.</p>
<p>This method generates AST nodes depending on the macro-runtime value of
<code>v</code>. As such, only basic types and enums are supported and the behavior
for other types is undefined.</p>
<p>The provided <code>Position</code> <code>pos</code> is used for all generated inner AST nodes.</p></div></div><div class="platform platform-neko"><a name="makePosition"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#makePosition"><span class="identifier">makePosition</span></a>(inf:{min:<a class="type" href="/dox/Int">Int</a>, max:<a class="type" href="/dox/Int">Int</a>, file:<a class="type" href="/dox/String">String</a>}):<a class="type" href="/dox/haxe/macro/Position">Position</a></code></h3><div class="doc"><p>Builds a <code>Position</code> from <code>inf</code>.</p></div></div><div class="platform platform-neko"><a name="onGenerate"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#onGenerate"><span class="identifier">onGenerate</span></a>(callback:<a class="type" href="/dox/Array">Array</a>&lt;<a class="type" href="/dox/haxe/macro/Type">Type</a>&gt; -&gt; <a class="type" href="/dox/Void">Void</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Adds a callback function <code>callback</code> which is invoked after the
compiler's typing phase, just before its generation phase.</p>
<p>The callback receives an <code><a href="/dox/Array">Array</a></code> containing all types which are about
to be generated. Modifications are limited to metadata, it is mainly
intended to obtain information.</p></div></div><div class="platform platform-neko"><a name="onMacroContextReused"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#onMacroContextReused"><span class="identifier">onMacroContextReused</span></a>(callb:<a class="type" href="/dox/Bool">Bool</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Register a callback function that will be called everytime the macro context cached is reused with a new
compilation. This enable to reset some static vars since the code might have been changed. If the callback
returns false, the macro context is discarded and another one is created.</p></div></div><div class="platform platform-neko"><a name="onTypeNotFound"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#onTypeNotFound"><span class="identifier">onTypeNotFound</span></a>(callback:<a class="type" href="/dox/String">String</a> -&gt; <a class="type" href="/dox/haxe/macro/TypeDefinition">TypeDefinition</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Adds a callback function <code>callback</code> which is invoked when a type name
cannot be resolved.</p>
<p>The callback may return a type definition, which is then used for the
expected type. If it returns null, the type is considered to still not
exist.</p></div></div><div class="platform platform-neko"><a name="parse"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#parse"><span class="identifier">parse</span></a>(expr:<a class="type" href="/dox/String">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position">Position</a>):<a class="type" href="/dox/haxe/macro/Expr">Expr</a></code></h3><div class="doc"><p>Parses <code>expr</code> as haxe code, returning the corresponding AST.</p>
<p>The provided <code>Position</code> <code>pos</code> is used for all generated inner AST nodes.</p></div></div><div class="platform platform-neko"><a name="parseInlineString"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#parseInlineString"><span class="identifier">parseInlineString</span></a>(expr:<a class="type" href="/dox/String">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position">Position</a>):<a class="type" href="/dox/haxe/macro/Expr">Expr</a></code></h3><div class="doc"><p>Similar to <code>parse</code>, but error positions are reported within the provided
String <code>expr</code>.</p></div></div><div class="platform platform-neko"><a name="registerModuleDependency"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#registerModuleDependency"><span class="identifier">registerModuleDependency</span></a>(modulePath:<a class="type" href="/dox/String">String</a>, externFile:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Manually adds a dependency between module <code>modulePath</code> and an external
file <code>externFile</code>.</p>
<p>This affects the compilation cache, causing the module to be typed if
<code>externFile</code> has changed.</p>
<p>Has no effect if the compilation cache is not used.</p></div></div><div class="platform platform-neko"><a name="registerModuleReuseCall"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#registerModuleReuseCall"><span class="identifier">registerModuleReuseCall</span></a>(modulePath:<a class="type" href="/dox/String">String</a>, macroCall:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Add a macro call to perform in case the module is reused by the compilation cache.</p></div></div><div class="platform platform-neko"><a name="resolvePath"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#resolvePath"><span class="identifier">resolvePath</span></a>(file:<a class="type" href="/dox/String">String</a>):<a class="type" href="/dox/String">String</a></code></h3><div class="doc"><p>Resolves a file name <code>file</code> based on the current class paths.</p>
<p>The resolution follows the usual class path rules where the last
declared class path has priority.</p>
<p>If a class path was declared relative, this method returns the relative
file path. Otherwise it returns the absolute file path.</p></div></div><div class="platform platform-neko"><a name="signature"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#signature"><span class="identifier">signature</span></a>(v:<a class="type" href="/dox/Dynamic">Dynamic</a>):<a class="type" href="/dox/String">String</a></code></h3><div class="doc"><p>Returns a hashed MD5 signature of value <code>v</code>.</p></div></div><div class="platform platform-neko"><a name="toComplexType"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#toComplexType"><span class="identifier">toComplexType</span></a>(t:<a class="type" href="/dox/haxe/macro/Type">Type</a>):<a class="type" href="/dox/Null">Null</a>&lt;<a class="type" href="/dox/haxe/macro/ComplexType">ComplexType</a>&gt;</code></h3><div class="doc"><p>Returns the <code>ComplexType</code> corresponding to the given <code><a href="/dox/Type">Type</a></code> <code>t</code>.</p>
<p>See <code><a href="/dox/haxe/macro/TypeTools#toComplexType">haxe.macro.TypeTools.toComplexType</a></code> for details.</p></div></div><div class="platform platform-neko"><a name="typeof"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#typeof"><span class="identifier">typeof</span></a>(e:<a class="type" href="/dox/haxe/macro/Expr">Expr</a>):<a class="type" href="/dox/haxe/macro/Type">Type</a></code></h3><div class="doc"><p>Types expression <code>e</code> and returns its type.</p>
<p>Typing the expression may result in an compiler error which can be
caught using <code>try ... catch</code>.</p></div></div><div class="platform platform-neko"><a name="unify"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#unify"><span class="identifier">unify</span></a>(t1:<a class="type" href="/dox/haxe/macro/Type">Type</a>, t2:<a class="type" href="/dox/haxe/macro/Type">Type</a>):<a class="type" href="/dox/Bool">Bool</a></code></h3><div class="doc"><p>Returns true if <code>t1</code> and <code>t2</code> unify, false otherwise.</p></div></div><div class="platform platform-neko"><a name="warning"></a><h3><code><span class="keyword">static</span> <span class="keyword">function</span> <a href="#warning"><span class="identifier">warning</span></a>(msg:<a class="type" href="/dox/String">String</a>, pos:<a class="type" href="/dox/haxe/macro/Position">Position</a>):<a class="type" href="/dox/Void">Void</a></code></h3><div class="doc"><p>Displays a compilation warning <code>msg</code> at the given <code>Position</code> <code>pos</code>.</p></div></div></div></div></div></body></html>